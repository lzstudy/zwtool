#!/bin/bash

# 通用路径
ROOT_PATH=$PATH_ZWTL_ROOT

# 专用文件
THIS_FILE=$ROOT_PATH/zwkcmd
LINK_FILE=$PATH_ZWTL_INST/x

########################################################################################################
# 打印用法
########################################################################################################
function print_usage()
{
    echo "cmd           [arg]            [val]     description"
    echo "----------    -------------    ------    --------------"
	echo "kc            find             file      gut file from host"
	echo "kc            cdm                        edit host"
}

########################################################################################################
# 程序入口
########################################################################################################
function zwkcmd_find()
{
	if [ $# == 2 ]; then
		find ./* -name $2
		exit
	fi

	case $3 in
		-t)
		find ./* -name $2 -type f
		;;

		-d)
		find ./* -name $2 -type d
		;;
	esac
}

########################################################################################################
# 程序入口
########################################################################################################
function zwkcmd_grep()
{
	grep --color=auto $2 -nr
}

########################################################################################################
# 程序入口
########################################################################################################
function zwkcmd_entry()
{
	# 如果没写参数, 或帮助命令, 则打印帮助信息
	if [ $# = 0 ] || [ $1 = '-h' ] || [ $1 = '--help' ];then
		print_usage
		exit 1
	fi

	case $1 in
		-init)
		ln -s $THIS_FILE $LINK_FILE 2> /dev/null
		;;

		-edit)
		vi $THIS_FILE
		;;

		find)
		zwkcmd_find $@
		;;

		grep)
		zwkcmd_grep $@
		;;

		gl)
		git log --oneline
		;;
	esac
}
zwkcmd_entry $@

